@model ClientManagement.UI.MVC.Models.CompleteJobViewModel
@{
    ViewBag.Title = "Complete Job";
}

<h2>@ViewBag.Title</h2>
<hr />

<div class="row">
    <div class="col-sm-4">
        @using (Html.BeginForm("CompleteJob", "Jobs", FormMethod.Post))
        {
            <p>
                <h4 style="margin-bottom:0px;">Add Expenses</h4><br />
                Expense Name: <br/>
                @Html.TextBoxFor(m => m.ExpenseToAdd.ExpenseName, Model.ExpenseToAdd.ExpenseName, new { @class = "form-control" })
                Expense Cost: <br/>
                @Html.TextBoxFor(m => m.ExpenseToAdd.ExpenseCost, Model.ExpenseToAdd.ExpenseCost, new { @class = "form-control" })
                @Html.TextBoxFor(m => m.JobId, Model.JobId, new { @class = "hidden" })
            </p>

            <button type="submit" class="btn btn-default">Add Expense</button>
        }
        <br/><br />

        @using (Html.BeginForm("CompleteJobSubmit", "Jobs", FormMethod.Post))
        {
            <p>
                Billed Hours: <br />
                @Html.TextBoxFor(m => m.Hours, Model.Hours, new { @class = "form-control" })
                @Html.TextBoxFor(m => m.JobId, Model.JobId, new { @class = "hidden" })
            </p>

            <button type="submit" class="btn btn-default">Submit</button>
        }

        <br /><br />
    </div>


    <div class="col-sm-4">
        <h4>Job Expenses</h4>
        @if (Model.AllExpensesForJob.Count() > 0)
        {
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Cost</th>
                    </tr>
                </thead>

                <tbody>
                    @for (int i = 0; i < Model.AllExpensesForJob.Count(); i++)
                    {
                        <tr>
                            <td>@Model.AllExpensesForJob[i].ExpenseName</td>
                            <td>$@Model.AllExpensesForJob[i].ExpenseCost</td>
                        </tr>
                    }
                </tbody>
            </table>
        }

        else
        {
            <p>You currently do not have any expenses for this job.</p>
        }
    </div>

    <div class="col-sm-4">
    </div>
</div>
